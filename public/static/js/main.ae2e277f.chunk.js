(window.webpackJsonpwords=window.webpackJsonpwords||[]).push([[0],{102:function(e,t,a){},143:function(e,t,a){e.exports=a(373)},149:function(e,t,a){},195:function(e,t){},198:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(137),s=a.n(c),o=a(15),l=a(20),i=a(30),m=a(28),u=a(31),d=a(51),f=a(21),p=a(17),v=a.n(p),y=a(29),E=a(25),h=(a(149),function(e){return e.show?r.a.createElement("div",{className:"spinner-cover"},r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:"spinner-text"},"Loading..."))):null}),g=/[^a-zA-Z0-9]/g,b=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"isAlphanumeric",value:function(e){return!e.match(g)}},{key:"removeNonAlphanumeric",value:function(e){return e.replace(g,"")}}]),e}(),N=(a(150),a(138)),S=a.n(N),w=function e(){var t=this;Object(o.a)(this,e),this.sendGameRequest=function(){var e=Object(y.a)(v.a.mark((function e(a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.socket.emit("join",{gameId:a,username:n}),t.socket.on("init",(function(a){t.gameState=a,t.socketId=a.socketId,e(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.readyGame=function(e){return new Promise((function(a,n){t.socket.emit("ready",{ready:e})}))},this.listenForStart=function(e){t.socket.on("start",(function(a){t.hasGameEnded=!1,t.gameState=a,e()}))},this.listenForMessages=function(e){t.socket.on("message",(function(a){t.gameState=a,e()}))},this.listenForGameEnd=function(e){t.socket.on("end",(function(a){t.hasGameEnded=!0,e()}))},this.sendProgressUpdate=function(e){t.socket.emit("update",{progress:e})},this.sendColorChange=function(e){t.socket.emit("changeColor",{color:e})},this.socket=S()("/"),this.gameState=null,this.socketId=null},O=r.a.createContext(null),k=function(e){return r.a.createElement(O.Provider,{value:new w},e.children)},j=function(e){return function(t){return r.a.createElement(O.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({gameService:a},t))}))}},I=(a(198),function(e){return b.removeNonAlphanumeric(e)}),x=j((function(e){var t=e.gameService,a=r.a.useState(!1),n=Object(E.a)(a,2),c=n[0],s=n[1],o=r.a.useState(""),l=Object(E.a)(o,2),i=l[0],m=l[1],u=r.a.useState(""),d=Object(E.a)(u,2),p=d[0],g=d[1],N=r.a.useState(!1),S=Object(E.a)(N,2),w=S[0],O=S[1],k=function(){var e=Object(y.a)(v.a.mark((function e(){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(a=0===i.length?"Please enter a name.":0===p.length?"Please enter a game ID.":b.isAlphanumeric(p)?"":"Please do not enter non-alphanumeric characters into the game ID.")){e.next=10;break}return s(!0),e.next=5,t.sendGameRequest(p,i);case 5:n=e.sent,s(!1),n?O(!0):window.alert("Game ID does not exist!"),e.next=11;break;case 10:window.alert(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Words"),r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"individual-input"},r.a.createElement("div",{className:"label"},"Enter your name:"),r.a.createElement("input",{className:"input",value:i,onChange:function(e){return m(e.target.value)},maxLength:16})),r.a.createElement("div",{className:"individual-input"},r.a.createElement("div",{className:"label"},"Enter your game:"),r.a.createElement("input",{className:"input",value:p,onChange:function(e){return g(e.target.value)},maxLength:16})),r.a.createElement("button",{className:"submit",onClick:k},"Enter Game"),w?r.a.createElement(f.a,{to:"/game/".concat(I(p))}):null),r.a.createElement(h,{show:c}))})),C=a(78),G=a(9),D=(a(203),function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"blauw"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"paars"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"rood"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"oranje"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"geel"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"groen"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"blauw2"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"paars2"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"rood2"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"oranje2"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"geel2"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"groen2"},Object(G.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))))}),P=a(141),A=a.n(P),L=(a(204),function(e){var t=e.color,a=void 0===t?"white":t,n=e.rotation,c="rotate(".concat(n,"deg)");return r.a.createElement("div",{className:"car"},r.a.createElement("div",{className:"car-body",style:{borderColor:a}},r.a.createElement("div",{className:"car-body-before",style:{background:a}}),r.a.createElement("div",{className:"car-top-back"},r.a.createElement("div",{className:"back-curve"})),r.a.createElement("div",{className:"car-top-front",style:{background:a}},r.a.createElement("div",{className:"car-top-front-before",style:{background:a,borderColor:a}}),r.a.createElement("div",{className:"wind-sheild"}),r.a.createElement("div",{className:"car-top-front-after",style:{background:a}})),r.a.createElement("div",{className:"bonet-front",style:{background:a}}),r.a.createElement("div",{className:"stepney"}),r.a.createElement("div",{className:"car-body-after",style:{borderColor:a}})),r.a.createElement("div",{className:"boundary-tyre-cover"},r.a.createElement("div",{className:"boundary-tyre-cover-back-bottom"}),r.a.createElement("div",{className:"boundary-tyre-cover-inner"})),r.a.createElement("div",{className:"tyre-cover-front"},r.a.createElement("div",{className:"boundary-tyre-cover-inner-front"})),r.a.createElement("div",{className:"base-axcel"}),r.a.createElement("div",{className:"front-bumper"}),r.a.createElement("div",{className:"tyre",style:{transform:c}},r.a.createElement("div",{className:"gap"})),r.a.createElement("div",{className:"tyre front",style:{transform:c}},r.a.createElement("div",{className:"gap"})),r.a.createElement("div",{className:"car-shadow"}))}),R=(a(205),function(e){switch(e){case 0:return"first";case 1:return"second";case 2:return"third";default:return""}}),T=function(e){var t=e.position,a=R(t);return r.a.createElement("div",{className:"pos-container ".concat(a)},a.toUpperCase())},M=(a(206),function(e){var t=r.a.useRef(),a=r.a.useRef(),n=r.a.useState(0),c=Object(E.a)(n,2),s=c[0],o=c[1];r.a.useEffect((function(){var e=function(){o((function(e){return t.current.clientWidth-170}))},a=A.a.debounce(e,250);return e(),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[]);var l,i=e.itsYou,m=e.name,u=e.progress,d=e.wheelRadius,f=e.color,p=e.position;return l=0!==s?u*(s/(2*Math.PI*d))*360:0,r.a.createElement("div",{ref:t,className:"rollbyprogress-container"},r.a.createElement("div",{className:"car-container",style:{marginLeft:u*s}},r.a.createElement("div",{ref:a,style:{color:i?"#fcba03":"white",zIndex:99,marginBottom:"1.25em",marginLeft:a.current?Math.min(0,s+170-(u*s+a.current.clientWidth)):0,textAlign:"center",whiteSpace:"nowrap",transition:"0.4s all linear"}},m+(i?" (You)":"")),r.a.createElement(L,{color:f,rotation:l})),r.a.createElement(T,{position:p}))}),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7,t=B(e),a=B(e),n=B(e);return"rgb(".concat(t,", ").concat(a,", ").concat(n)},B=function(e){return 255*(Math.random()*(1-e)+e)},z=function(e){var t=e.socketId,a=e.players;return r.a.createElement("div",{style:{flex:1,overflowY:"auto",overflowX:"visible",zIndex:300,display:"block",position:"relative"}},a.map((function(e,a){return r.a.createElement(M,{color:e.color,itsYou:t===e.socketId,name:e.username,progress:e.progress,position:e.position,wheelRadius:15})})))},Y=function(e){var t=e.showStats,a=e.wpm,n=e.errorCount;return r.a.createElement("div",{style:{fontSize:"2em",fontWeight:"bold",display:"flex",flexFlow:"row",margin:"1em 0"}},r.a.createElement("div",{style:{flex:1}},t?"WPM:  "+a:"Start typing to get WPM"),t?r.a.createElement("div",{style:{flex:1,color:"#AA0000"}},"Errors: ",n):null)},W=(a(207),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).ref=r.a.createRef(),a.handleOnFocus=function(){return a.setState({focused:!0})},a.handleOnBlur=function(){return a.setState({focused:!1})},a.state={focused:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.ref.current.addEventListener("keydown",this.props.handleKeyDown),this.ref.current.focus()}},{key:"componentWillUnmount",value:function(){this.ref.current.removeEventListener("keydown",this.props.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.typed,a=e.leftOver,n=e.error;return r.a.createElement("div",{tabIndex:"0",ref:this.ref,style:{width:"calc(100% - 48px)",fontSize:"2em",flex:1,backgroundColor:"rgba(255, 255, 255, 0.1)",padding:"24px"},onFocus:this.handleOnFocus,onBlur:this.handleOnBlur},r.a.createElement("span",{style:{color:"cyan"},className:this.state.focused?"blink":""},t),r.a.createElement("span",{style:{backgroundColor:"red"}},n?a[0]:""),n?a.slice(1):a)}}]),t}(r.a.Component)),U=(a(208),function(e){var t=e.show,a=e.children,n=e.style;return t?r.a.createElement("div",{className:"modal-overlay"},r.a.createElement("div",{className:"modal-card",style:n},a)):null}),K=(a(102),a(209),a(142)),q=function(e){return r.a.createElement("h2",{style:{color:F()}},"Lobby ID: ",e)},J=function(e){return e?r.a.createElement("h2",{className:"ready-text"},"Please wait for the other players to get ready."):r.a.createElement("h2",{className:"ready-text flash"},"Press space to get ready.")},X=function(e,t,a,n){return r.a.createElement("div",{className:"user-player-card"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"lobby-car-container"},r.a.createElement(L,{color:a})),r.a.createElement("div",{className:"player-title-card"},r.a.createElement("p",{className:"player-title"},e),r.a.createElement("p",{style:{color:t?"#15ff00":"transparent"}},"READY"))),Q(n))},Z=function(e){return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(480px, 1fr) )",justifyItems:"center"}},e.map((function(e){return H(e.username,e.ready,e.color)})))},H=function(e,t,a){return r.a.createElement("div",{className:"player-card"},r.a.createElement("div",{className:"lobby-car-container"},r.a.createElement(L,{color:a})),r.a.createElement("div",{className:"player-title-card"},r.a.createElement("p",{className:"player-title"},e),r.a.createElement("p",{style:{color:t?"#15ff00":"transparent"}},"READY")))},Q=function(e){return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("h3",null,"Color:"),r.a.createElement(K.TwitterPicker,{onChangeComplete:e,className:"color-picker",width:"100%",triangle:"hide"}))},V=function(e){return-1===e?null:r.a.createElement(U,{show:!0},r.a.createElement("p",{style:{fontSize:"2em"}},"Game starting in"),r.a.createElement("div",{style:{fontSize:"3em",marginBottom:"0.75em"}},e))},$=function(e){var t=e.gameId,a=e.isPlayerReady,n=e.player,c=e.players,s=e.onStart,o=e.startingCounter,l=e.onColorChange;r.a.useEffect((function(){var e=!1,t=function(t){" "!==t.key||e||(t.preventDefault(),e=!0,s())},a=function(){return e=!1};return window.addEventListener("keydown",t),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",a)}}),[]);return r.a.createElement("div",{className:"game-container"},q(t),J(),X(n.username,a,n.color,(function(e){l(e.hex)})),Z(c),V(o))},_=function(e){var t=e.show,a=e.timeLeft,n=void 0===a?0:a;return r.a.createElement(U,{show:t,style:{fontSize:"2em",width:"50%"}},r.a.createElement("p",null,"Game has ended!"),r.a.createElement("p",{style:{color:"#ccc"}},"Returning to lobby in ",n,"..."))};function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var te={LOADING:0,LOBBY:1,STARTING:2,RUNNING:3,ENDED:4},ae={typed:"",leftOver:"",error:!1,errorCount:0,time:-1},ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).loadGame=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.gameService.gameState){e.next=3;break}return e.next=3,a.props.gameService.sendGameRequest(a.props.match.params.id,"");case 3:t=a.props.gameService.gameState.started?te.LOADING:te.LOBBY,a.setState({gameStatus:t});case 5:case"end":return e.stop()}}),e)}))),a.readyForGameStart=function(){a.props.gameService.readyGame(!a.state.isPlayerReady),a.setState((function(e){return{isPlayerReady:!e.isPlayerReady}}))},a.handleGameStart=function(){a.setState({leftOver:a.props.gameService.gameState.text,gameStatus:te.STARTING,startingTimeLeft:3}),a.countdownFromState("startingTimeLeft",(function(){return a.setState({gameStatus:te.RUNNING,isPlayerReady:!1})}))},a.handleGameMsg=function(){a.props.gameService.gameState.started?a.setState({}):(a.setState({gameStatus:te.LOBBY}),a.resetGameState())},a.handleGameEnd=function(){a.setState({gameStatus:te.ENDED,endingTimeLeft:5}),a.countdownFromState("endingTimeLeft")},a.countdownFromState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function(){if(a.state[e]<=1)return t(),clearInterval(r);a.setState((function(t){return Object(C.a)({},e,t[e]-1)}))},r=setInterval(n,1e3)},a.resetGameState=function(){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach((function(t){Object(C.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,{},ae))},a.resetMeasurer=function(){clearTimeout(a.autoMeasureInterval),a.autoMeasureInterval=setTimeout(a.measureStats,2e3)},a.measureStats=function(){a.setState({}),a.resetMeasurer()},a.handleKeyDown=function(e){if(16!==e.keyCode&&0!==a.state.leftOver.length)if(a.resetMeasurer(),e.key===a.state.leftOver[0]){var t=a.state.typed+e.key,n=a.state.leftOver.slice(1);a.setState({typed:t,leftOver:n,error:!1}),a.props.gameService.sendProgressUpdate(a.state.typed.length/a.props.gameService.gameState.text.length),0===a.state.leftOver.length&&clearTimeout(a.autoMeasureInterval),-1===a.state.time&&a.setState({time:(new Date).getTime()})}else a.setState((function(e){return{error:!0,errorCount:e.errorCount+1}}))},a.getWpm=function(){return 1===a.state.typed.split(" ").length?"Measuring...":(a.state.typed.split(" ").length/((new Date).getTime()-a.state.time)*6e4).toFixed(0)},a.state={isPlayerReady:!1,typed:"",leftOver:"",error:!1,errorCount:0,time:-1},a.autoMeasureInterval=null,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadGame(),this.props.gameService.listenForStart(this.handleGameStart),this.props.gameService.listenForMessages(this.handleGameMsg),this.props.gameService.listenForGameEnd(this.handleGameEnd)}},{key:"render",value:function(){var e=this,t=this.state,a=t.typed,n=t.leftOver,c=t.error,s=t.gameStatus;if((s===te.LOBBY||s===te.STARTING)&&this.props.gameService.gameState){var o=this.props.gameService.gameState.players.filter((function(t){return t.socketId===e.props.gameService.socketId}))[0];return r.a.createElement($,{onStart:this.readyForGameStart,gameId:this.props.gameService.gameState.id,onColorChange:this.props.gameService.sendColorChange,startingCounter:s!==te.STARTING?-1:this.state.startingTimeLeft,player:o,isPlayerReady:this.state.isPlayerReady,players:this.props.gameService.gameState.players.filter((function(t){return t.socketId!==e.props.gameService.socketId}))})}return r.a.createElement("div",{className:"game-container"},s===te.RUNNING||s===te.ENDED?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Y,{showStats:-1!==e.state.time,wpm:e.getWpm(),errorCount:e.state.errorCount}),r.a.createElement(W,{typed:a,leftOver:n,error:c,handleKeyDown:e.handleKeyDown})),r.a.createElement(z,{socketId:e.props.gameService.socketId,players:e.props.gameService.gameState.players}),e.state.typed.length>0&&0===e.state.leftOver.length?r.a.createElement(D,null):null):null,r.a.createElement(h,{show:s===te.LOADING}),r.a.createElement(_,{show:s===te.ENDED,timeLeft:this.state.endingTimeLeft}))}}]),t}(n.Component),re=Object(f.g)(j(ne)),ce=(a(372),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(k,null,r.a.createElement(d.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0},r.a.createElement(x,null)),r.a.createElement(f.b,{path:"/game/:id"},r.a.createElement(re,null)))))}}]),t}(n.Component));s.a.render(r.a.createElement(ce,null),document.getElementById("root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.ae2e277f.chunk.js.map