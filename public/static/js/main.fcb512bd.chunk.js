(window.webpackJsonpwords=window.webpackJsonpwords||[]).push([[0],{143:function(e,t,a){e.exports=a(374)},149:function(e,t,a){},195:function(e,t){},198:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(137),o=a.n(c),s=a(6),i=a(12),l=a(18),u=a(17),m=a(19),d=a(37),p=a(24),f=a(21),v=a.n(f),y=a(31),E=a(28),g=(a(149),function(e){return e.show?r.a.createElement("div",{className:"spinner-cover"},r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:"spinner-text"},"Loading..."))):null}),h=/[^a-zA-Z0-9]/g,b=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,null,[{key:"isAlphanumeric",value:function(e){return!e.match(h)}},{key:"removeNonAlphanumeric",value:function(e){return e.replace(h,"")}}]),e}(),N=(a(150),a(138)),S=a.n(N),O=function e(){var t=this;Object(s.a)(this,e),this.sendGameRequest=function(){var e=Object(y.a)(v.a.mark((function e(a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.socket.emit("join",{gameId:a,username:n}),t.socket.on("init",(function(a){t.gameState=a,t.socketId=a.socketId,e(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.readyGame=function(e){return new Promise((function(a,n){t.socket.emit("ready",{ready:e})}))},this.listenForStart=function(e){t.socket.on("start",(function(a){console.log("Game started!",a),t.hasGameEnded=!1,t.gameState=a,e()}))},this.listenForMessages=function(e){t.socket.on("message",(function(a){console.log("Received Update: ",a),t.gameState=a,e()}))},this.listenForGameEnd=function(e){t.socket.on("end",(function(a){t.hasGameEnded=!0,e()}))},this.sendProgressUpdate=function(e){t.socket.emit("update",{progress:e})},this.sendColorChange=function(e){t.socket.emit("changeColor",{color:e})},this.socket=S()("/"),this.gameState=null,this.socketId=null},w=r.a.createContext(null),k=function(e){return r.a.createElement(w.Provider,{value:new O},e.children)},j=function(e){return function(t){return r.a.createElement(w.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({gameService:a},t))}))}},G=(a(198),function(e){return b.removeNonAlphanumeric(e)}),I=j((function(e){var t=e.gameService,a=r.a.useState(!1),n=Object(E.a)(a,2),c=n[0],o=n[1],s=r.a.useState(""),i=Object(E.a)(s,2),l=i[0],u=i[1],m=r.a.useState(""),d=Object(E.a)(m,2),f=d[0],h=d[1],N=r.a.useState(!1),S=Object(E.a)(N,2),O=S[0],w=S[1],k=function(){var e=Object(y.a)(v.a.mark((function e(){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(a=0===l.length?"Please enter a name.":0===f.length?"Please enter a game ID.":b.isAlphanumeric(f)?"":"Please do not enter non-alphanumeric characters into the game ID.")){e.next=10;break}return o(!0),e.next=5,t.sendGameRequest(f,l);case 5:n=e.sent,o(!1),n?w(!0):window.alert("Game ID does not exist!"),e.next=11;break;case 10:window.alert(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Words"),r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"individual-input"},r.a.createElement("div",{className:"label"},"Enter your name:"),r.a.createElement("input",{className:"input",value:l,onChange:function(e){return u(e.target.value)},maxLength:16})),r.a.createElement("div",{className:"individual-input"},r.a.createElement("div",{className:"label"},"Enter your game:"),r.a.createElement("input",{className:"input",value:f,onChange:function(e){return h(e.target.value)},maxLength:16})),r.a.createElement("button",{className:"submit",onClick:k},"Enter Game"),O?r.a.createElement(p.a,{to:"/game/".concat(G(f))}):null),r.a.createElement(g,{show:c}))})),x=a(52),C=a(5),P=(a(203),function(){return r.a.createElement("div",{className:"fireworks-container"},r.a.createElement("div",{className:"blauw"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"paars"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"rood"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"oranje"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"geel"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"groen"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"blauw2"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"paars2"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"rood2"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"oranje2"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"geel2"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))),r.a.createElement("div",{className:"groen2"},Object(C.a)(Array(22)).map((function(e,t){return r.a.createElement("div",{className:"punt",key:t})}))))}),L=a(141),R=a.n(L),D=(a(204),function(e){var t=e.color,a=void 0===t?"white":t,n=e.rotation,c="rotate(".concat(n,"deg)");return r.a.createElement("div",{className:"car"},r.a.createElement("div",{className:"car-body",style:{borderColor:a}},r.a.createElement("div",{className:"car-body-before",style:{background:a}}),r.a.createElement("div",{className:"car-top-back"},r.a.createElement("div",{className:"back-curve"})),r.a.createElement("div",{className:"car-top-front",style:{background:a}},r.a.createElement("div",{className:"car-top-front-before",style:{background:a,borderColor:a}}),r.a.createElement("div",{className:"wind-sheild"}),r.a.createElement("div",{className:"car-top-front-after",style:{background:a}})),r.a.createElement("div",{className:"bonet-front",style:{background:a}}),r.a.createElement("div",{className:"stepney"}),r.a.createElement("div",{className:"car-body-after",style:{borderColor:a}})),r.a.createElement("div",{className:"boundary-tyre-cover"},r.a.createElement("div",{className:"boundary-tyre-cover-back-bottom"}),r.a.createElement("div",{className:"boundary-tyre-cover-inner"})),r.a.createElement("div",{className:"tyre-cover-front"},r.a.createElement("div",{className:"boundary-tyre-cover-inner-front"})),r.a.createElement("div",{className:"base-axcel"}),r.a.createElement("div",{className:"front-bumper"}),r.a.createElement("div",{className:"tyre",style:{transform:c}},r.a.createElement("div",{className:"gap"})),r.a.createElement("div",{className:"tyre front",style:{transform:c}},r.a.createElement("div",{className:"gap"})),r.a.createElement("div",{className:"car-shadow"}))}),A=(a(205),function(e){switch(e){case 0:return"first";case 1:return"second";case 2:return"third";default:return""}}),T=function(e){var t=e.position,a=A(t);return r.a.createElement("div",{className:"pos-container ".concat(a)},a.toUpperCase())},M=(a(206),function(e){var t=r.a.useRef(),a=r.a.useRef(),n=r.a.useState(0),c=Object(E.a)(n,2),o=c[0],s=c[1];r.a.useEffect((function(){var e=function(){s((function(e){return t.current.clientWidth-170}))},a=R.a.debounce(e,250);return e(),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[]);var i,l=e.itsYou,u=e.name,m=e.progress,d=e.wheelRadius,p=e.color,f=e.position;return i=0!==o?m*(o/(2*Math.PI*d))*360:0,r.a.createElement("div",{ref:t,className:"rollbyprogress-container"},r.a.createElement("div",{className:"car-container",style:{marginLeft:m*o}},r.a.createElement("div",{ref:a,style:{color:l?"#fcba03":"white",zIndex:99,marginBottom:"1.25em",marginLeft:a.current?Math.min(0,o+170-(m*o+a.current.clientWidth)):0,textAlign:"center",whiteSpace:"nowrap",transition:"0.4s all linear"}},u+(l?" (You)":"")),r.a.createElement(D,{color:p,rotation:i})),r.a.createElement(T,{position:f}))}),F=function(e){var t=e.socketId,a=e.players;return r.a.createElement("div",{style:{flex:1,overflowY:"auto",overflowX:"visible",zIndex:300,display:"block",position:"relative"}},a.map((function(e,a){return r.a.createElement(M,{color:e.color,itsYou:t===e.socketId,name:e.username,progress:e.progress,position:e.position,wheelRadius:15})})))},z=function(e){var t=e.showStats,a=e.wpm,n=e.errorCount;return r.a.createElement("div",{style:{fontSize:"2em",fontWeight:"bold",display:"flex",flexFlow:"row",margin:"1em 0"}},r.a.createElement("div",{style:{flex:1}},t?"WPM:  "+a:"Start typing to get WPM"),t?r.a.createElement("div",{style:{flex:1,color:"#AA0000"}},"Errors: ",n):null)},W=(a(207),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).ref=r.a.createRef(),a.handleOnFocus=function(){return a.setState({focused:!0})},a.handleOnBlur=function(){return a.setState({focused:!1})},a.state={focused:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.ref.current.addEventListener("keydown",this.props.handleKeyDown),this.ref.current.focus()}},{key:"componentWillUnmount",value:function(){this.ref.current.removeEventListener("keydown",this.props.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.typed,a=e.leftOver,n=e.error;return r.a.createElement("div",{tabIndex:"0",ref:this.ref,style:{width:"calc(100% - 48px)",fontSize:"2em",flex:1,backgroundColor:"rgba(255, 255, 255, 0.1)",padding:"24px"},onFocus:this.handleOnFocus,onBlur:this.handleOnBlur},r.a.createElement("span",{style:{color:"cyan"},className:this.state.focused?"blink":""},t),r.a.createElement("span",{style:{backgroundColor:"red"}},n?a[0]:""),n?a.slice(1):a)}}]),t}(r.a.Component)),B=(a(208),function(e){var t=e.show,a=e.children,n=e.style;return t?r.a.createElement("div",{className:"modal-overlay"},r.a.createElement("div",{className:"modal-card",style:n},a)):null}),U=(a(60),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7,t=Y(e),a=Y(e),n=Y(e);return"rgb(".concat(t,", ").concat(a,", ").concat(n)}),Y=function(e){return 255*(Math.random()*(1-e)+e)},K=(a(209),a(142)),q=function(e){return r.a.createElement("h2",{style:{color:U()}},"Lobby ID: ",e)},J=function(e){return e?r.a.createElement("h2",{className:"ready-text"},"Please wait for the other players to get ready."):r.a.createElement("h2",{className:"ready-text flash"},"Press space to get ready.")},X=function(e,t,a,n){return r.a.createElement("div",{className:"user-player-card"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"lobby-car-container"},r.a.createElement(D,{color:a})),r.a.createElement("div",{className:"player-title-card"},r.a.createElement("p",{className:"player-title"},e),r.a.createElement("p",{style:{color:t?"#15ff00":"transparent"}},"READY"))),Q(a,n))},Z=function(e){return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(480px, 1fr) )",justifyItems:"center"}},e.map((function(e){return H(e.username,e.ready,e.color)})))},H=function(e,t,a){return r.a.createElement("div",{className:"player-card"},r.a.createElement("div",{className:"lobby-car-container"},r.a.createElement(D,{color:a})),r.a.createElement("div",{className:"player-title-card"},r.a.createElement("p",{className:"player-title"},e),r.a.createElement("p",{style:{color:t?"#15ff00":"transparent"}},"READY")))},Q=function(e,t){return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("h3",null,"Color:"),r.a.createElement(K.TwitterPicker,{color:e,onChangeComplete:t,className:"color-picker",width:"100%",triangle:"hide"}))},V=function(e){return-1===e?null:r.a.createElement(B,{show:!0},r.a.createElement("p",{style:{fontSize:"2em"}},"Game starting in"),r.a.createElement("div",{style:{fontSize:"3em",marginBottom:"0.75em"}},e))},$=function(e){var t=e.gameId,a=e.isPlayerReady,n=e.player,c=e.players,o=e.onStart,s=e.startingCounter,i=e.onColorChange;r.a.useEffect((function(){var e=!1,t=function(t){" "!==t.key||e||(t.preventDefault(),e=!0,o())},a=function(){return e=!1};return window.addEventListener("keydown",t),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",a)}}),[]);return r.a.createElement("div",{className:"game-container"},q(t),J(),X(n.username,a,n.color,(function(e){i(e.hex)})),Z(c),V(s))},_=(a(372),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.players,a=e.show,n=e.timeLeft,c=void 0===n?0:n;return r.a.createElement(B,{show:a},r.a.createElement("div",{style:{fontSize:"2em",width:"100%"}},r.a.createElement("p",null,"Game has ended!"),a?ee(t):null,r.a.createElement("p",{style:{color:"#ccc"}},"Returning to lobby in ",c,"...")))}}]),t}(n.PureComponent)),ee=function(e){var t=Object(C.a)(e).sort(ne);return r.a.createElement("div",{style:{fontSize:"1.5rem",margin:"0 12px"}},t.map(te))},te=function(e,t){return r.a.createElement("p",{className:ae(e.position)},t+1,". ",e.username)},ae=function(e){if(void 0===e)return"";switch(e){case 0:return"ld-first";case 1:return"ld-second";case 2:return"ld-third";default:return""}},ne=function(e,t){return void 0!==e.position&&void 0===t.position?-1:void 0!==t.position&&void 0===e.position?1:null!==e.position&&null===t.position?-1:null!==t.position&&null===e.position?1:void 0!==e.position&&null!==e.position||void 0!==t.position&&null!==t.position?e.position-t.position:t.progress-e.progress},re=_;function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var oe={typed:"",error:!1,errorCount:0,time:-1,finalizedWPM:0},se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).resetGameState=function(){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(x.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},oe))},a.resetMeasurer=function(){clearTimeout(a.autoMeasureInterval),a.autoMeasureInterval=setTimeout(a.measureStats,2e3)},a.measureStats=function(){a.setState({}),a.resetMeasurer()},a.handleKeyDown=function(e){if(16!==e.keyCode&&0!==a.props.leftOver.length)if(a.resetMeasurer(),e.key===a.props.leftOver[0]){var t=a.state.typed+e.key,n=a.props.onUpdateType(t.length);a.setState({typed:t,leftOver:n,error:!1}),0===a.props.leftOver.length&&(a.setState({finalizedWPM:a.getWpm()}),clearTimeout(a.autoMeasureInterval)),-1===a.state.time&&a.setState({time:(new Date).getTime()})}else a.setState((function(e){return{error:!0,errorCount:e.errorCount+1}}))},a.getWpm=function(){return 1===a.state.typed.split(" ").length?"Measuring...":a.state.finalizedWPM?a.state.finalizedWPM:(a.state.typed.split(" ").length/((new Date).getTime()-a.state.time)*6e4).toFixed(0)},a.renderGameElement=function(){var e=a.props,t=e.leftOver,n=e.playerSocketId,c=e.players,o=a.state,s=o.time,i=o.error,l=o.errorCount,u=o.typed;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(z,{showStats:-1!==s,wpm:a.getWpm(),errorCount:l}),r.a.createElement(W,{typed:u,leftOver:t,error:i,handleKeyDown:a.handleKeyDown})),r.a.createElement(F,{socketId:n,players:c}),u.length>0&&0===t.length?r.a.createElement(P,null):null)},a.state={typed:"",error:!1,errorCount:0,time:-1,finalizedWPM:0},a.autoMeasureInterval=null,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){e.willResetGame&&this.resetGameState()}},{key:"render",value:function(){return r.a.createElement("div",{className:"game-container"},this.renderGameElement(),r.a.createElement(re,{show:this.props.hasGameEnded,players:this.props.players,timeLeft:this.props.endingTimeLeft}))}}]),t}(n.Component),ie={LOADING:0,LOBBY:1,STARTING:2,RUNNING:3,ENDED:4},le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).loadGame=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.gameService.gameState){e.next=3;break}return e.next=3,a.props.gameService.sendGameRequest(a.props.match.params.id,"");case 3:a.props.gameService.gameState.started?a.setState({gameStatus:ie.RUNNING,leftOver:a.props.gameService.gameState.text}):a.setState({gameStatus:ie.LOBBY});case 4:case"end":return e.stop()}}),e)}))),a.readyForGameStart=function(){a.state.gameStatus!==ie.STARTING&&(a.props.gameService.readyGame(!a.state.isPlayerReady),a.setState((function(e){return{isPlayerReady:!e.isPlayerReady}})))},a.handleGameStart=function(){a.setState({leftOver:a.props.gameService.gameState.text,gameStatus:ie.STARTING,startingTimeLeft:3}),a.countdownFromState("startingTimeLeft",(function(){return a.setState({gameStatus:ie.RUNNING,isPlayerReady:!1})}))},a.handleGameMsg=function(){a.props.gameService.gameState.started?a.setState({}):a.setState({gameStatus:ie.LOBBY,willResetGame:!0})},a.handleGameEnd=function(){a.setState({gameStatus:ie.ENDED,endingTimeLeft:5}),a.countdownFromState("endingTimeLeft")},a.countdownFromState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function(){if(a.state[e]<=1)return t(),clearInterval(r);a.setState((function(t){return Object(x.a)({},e,t[e]-1)}))},r=setInterval(n,1e3)},a.onUpdateType=function(e){var t=a.state.leftOver.slice(1);return a.setState((function(e){return{leftOver:t}})),a.props.gameService.sendProgressUpdate(e/a.props.gameService.gameState.text.length),t},a.renderGameLobby=function(){if(a.props.gameService.gameState){var e=a.state.gameStatus;if(e===ie.LOBBY||e===ie.STARTING){var t=a.props.gameService.gameState.players.filter((function(e){return e.socketId===a.props.gameService.socketId}))[0];return r.a.createElement($,{onStart:a.readyForGameStart,gameId:a.props.gameService.gameState.id,onColorChange:a.props.gameService.sendColorChange,startingCounter:e!==ie.STARTING?-1:a.state.startingTimeLeft,player:t,isPlayerReady:a.state.isPlayerReady,players:a.props.gameService.gameState.players.filter((function(e){return e.socketId!==a.props.gameService.socketId}))})}}},a.renderGame=function(){var e=a.state,t=e.gameStatus,n=e.leftOver;if(t===ie.RUNNING||t===ie.ENDED)return r.a.createElement(se,{hasGameEnded:t===ie.ENDED,endingTimeLeft:a.state.endingTimeLeft,leftOver:n,onUpdateType:a.onUpdateType,playerSocketId:a.props.gameService.socketId,players:a.props.gameService.gameState.players})},a.renderSpinningLoader=function(){return r.a.createElement(g,{show:a.state.gameStatus===ie.LOADING})},a.state={isPlayerReady:!1,leftOver:"",willResetGame:!1},a.autoMeasureInterval=null,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.loadGame(),this.props.gameService.listenForStart(this.handleGameStart),this.props.gameService.listenForMessages(this.handleGameMsg),this.props.gameService.listenForGameEnd(this.handleGameEnd)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderGameLobby(),this.renderGame(),this.renderSpinningLoader())}}]),t}(n.Component),ue=Object(p.g)(j(le)),me=(a(373),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(k,null,r.a.createElement(d.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0},r.a.createElement(I,null)),r.a.createElement(p.b,{path:"/game/:id"},r.a.createElement(ue,null)))))}}]),t}(n.Component));o.a.render(r.a.createElement(me,null),document.getElementById("root"))},60:function(e,t,a){}},[[143,1,2]]]);
//# sourceMappingURL=main.fcb512bd.chunk.js.map